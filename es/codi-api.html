<!DOCTYPE html>
<html lang="es">
  <head>
    <title>
      CoDi API - Bank of Mexico Free Digital Payment System | Pablo Cruz
    </title>
    <!-- Primary Meta Tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicon -->
    <link rel="icon" href="../images/terminal-solid.png" type="image/png" />

    <!-- Open Graph Tags -->
    <meta
      property="og:title"
      content="CoDi API - Bank of Mexico Free Digital Payment System"
    />
    <meta
      property="og:description"
      content="Production-ready Node.js REST API for commission-free digital payments in Mexico. Integrates with Banxico's official CoDi system using RSA digital signatures."
    />
    <meta
      property="og:image"
      content="https://pablocruz.io/images/codi-api/codi-api-cover.png"
    />
    <meta property="og:url" content="https://pablocruz.io/codi-api.html" />
    <meta property="og:type" content="article" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="CoDi API - Bank of Mexico Free Digital Payment System"
    />
    <meta
      name="twitter:description"
      content="Production-ready Node.js REST API for commission-free digital payments in Mexico. Integrates with Banxico's official CoDi system using RSA digital signatures."
    />
    <meta
      name="twitter:image"
      content="https://pablocruz.io/images/codi-api/codi-api-cover.png"
    />

    <!-- Stylesheets-->
    <link rel="stylesheet" href="../assets/css/custom.css" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <link rel="stylesheet" href="../assets/css/blog.css" />

    <!-- Prism.js CSS for syntax highlighting -->
    <link
      href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-okaidia.min.css"
      rel="stylesheet"
    />

    <!-- Hero Background Image -->
    <link
      rel="preload"
      as="image"
      href="/images/codi-api/codi-api-featured.png"
    />
    <noscript
      ><link rel="stylesheet" href="../assets/css/noscript.css"
    /></noscript>

    
    <!-- Hreflang tags for SEO -->
    <link rel="alternate" hreflang="en" href="https://pablocruz.io/codi-api.html" />
    <link rel="alternate" hreflang="es" href="https://pablocruz.io/es/codi-api.html" />
    <link rel="alternate" hreflang="x-default" href="https://pablocruz.io/codi-api.html" />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-LDNFBEYMLD"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-LDNFBEYMLD");
    </script>
  </head>

  <body class="is-preload">
    <!-- Header Start-->
    <header id="header" class="blog-header">
      <!-- Language Switcher -->
      <div class="language-switcher">
        <a href="../codi-api.html" class="lang-btn" aria-label="Switch to English">EN</a>
        <span class="lang-separator">|</span>
        <a href="codi-api.html" class="lang-btn active" aria-label="Cambiar a Español">ES</a>
      </div>
      <div class="inner">
        <div class="blog-nav">
          <a href="../es/index.html" class="button" >← Volver al Portafolio</a>
        </div>
        <div class="blog-title-container">
          <img
            src="../images/codi-api/codi-logo.png"
            alt="CoDi Logo"
            class="codi-logo"
          />
          <h1 >API CoDi del Banco de México</h1>
          <p class="blog-description" >API de código abierto que permite a empresas mexicanas generar solicitudes de pago a través del sistema CoDi del Banco Central de México. Cero comisiones por transacción, depósitos inmediatos, seguridad de nivel bancario y documentación completa.</p>
        </div>
      </div>
    </header>
    <!-- Header End-->

    <!-- Main Content Start -->
    <main>
      <!-- Featured Image Section -->
      <section id="featured-image" class="main style1">
        <div class="container">
          <article>
            <div class="blog-featured-image">
              <img
                src="../images/codi-api/codi-api-featured.png"
                alt="CoDi API Documentation Site Landing Page"
                class="image fit"
              />
            </div>
          </article>
        </div>
      </section>

      <!-- Blog Content Start -->
      <section id="blog-content" class="main style2">
        <div class="container">
          <article class="blog-post">
            <!-- Table of Contents -->
            <div class="toc-container">
              <h2 >Tabla de Contenidos</h2>
              <ul class="toc">
                <li><a href="#overview" >Descripción del Proyecto</a></li>
                <li><a href="#what-is-codi" >¿Qué es CoDi?</a></li>
                <li><a href="#architecture" >Arquitectura Técnica</a></li>
                <li>
                  <a href="#features" >Características Principales</a>
                  <ul>
                    <li><a href="#qr-payments" >Pagos con Código QR</a></li>
                    <li><a href="#push-payments" >Notificaciones Push</a></li>
                    <li>
                      <a href="#payment-queries" >Consultas de Estado de Pago</a>
                    </li>
                    <li><a href="#webhooks" >Integración de Webhooks</a></li>
                    <li><a href="#security" >Arquitectura de Seguridad</a></li>
                    <li>
                      <a href="#documentation" >Documentación Interactiva</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#developer-experience">Developer Experience</a>
                </li>
                <li><a href="#tech-stack">Tech Stack Deep Dive</a></li>
                <li><a href="#database">Database Architecture</a></li>
                <li><a href="#security-deep-dive">Security Features</a></li>
                <li><a href="#api-endpoints">API Endpoints Reference</a></li>
                <li><a href="#use-cases">Use Cases</a></li>
                <li><a href="#open-source">Código Abierto y Comunidad</a></li>
                <li><a href="#links">Project Links & Resources</a></li>
              </ul>
            </div>

            <!-- Introduction -->
            <div class="blog-section">
              <p >En esta publicación, explicaré cómo construí una API REST lista para producción que permite a empresas en México aceptar pagos digitales con cero comisiones por transacción y depósitos inmediatos. La API se integra con el sistema oficial de pagos CoDi del Banco de México (Banxico) y es completamente de código abierto bajo la licencia Apache 2.0.</p>
              <p>
                <span >Si quieres ir directamente al código, puedes visitar el</span>
                <a
         href="https://github.com/portfedh/codi-api"
         target="_blank"
         rel="noopener noreferrer"
         class="blog-link"
         
         >repositorio de GitHub</a
                ><span >. También puedes explorar el</span>
                <a
         href="https://docs.bite-size.mx/"
         target="_blank"
         rel="noopener noreferrer"
         class="blog-link"
         
         >sitio de documentación en vivo</a
                ><span >o probar el</span>
                <a
         href="https://api.bite-size.mx/api-docs"
         target="_blank"
         rel="noopener noreferrer"
         class="blog-link"
         
         >playground interactivo de la API</a
                >.
              </p>
              <p>
                <strong><span >¿Te gustaría implementar CoDi para tu negocio?</span></strong> <a href="mailto:pablo.cruz.lemini@gmail.com" class="blog-link" >Contáctame</a> <span >y te ayudaré a integrarlo.</span>
              </p>
            </div>

            <div class="section-separator"></div>

            <!-- Project Overview -->
            <div class="blog-section" id="overview">
              <h3 >Descripción del Proyecto</h3>
              <p >La API CoDi es una API REST de producción que resuelve un problema crítico para las empresas mexicanas: aceptar pagos digitales sin pagar altas comisiones por transacción. Los procesadores de pago tradicionales cobran entre 2-4% por transacción (más 16% de IVA), lo que puede impactar significativamente los márgenes de ganancia, especialmente para pequeñas empresas.</p>
              <p >Al integrarse directamente con el sistema CoDi de Banxico, esta API permite a las empresas aceptar pagos desde cualquier cuenta bancaria mexicana a través de códigos QR o notificaciones push a aplicaciones bancarias móviles, con cero comisiones por transacción.</p>

              <div class="image-container">
                <img
                  src="../images/codi-api/docs-index.png"
                  alt="CoDi API Documentation Site Landing Page"
                  class="image fit"
                />
                <p class="image-caption" >Sitio de Documentación de la API CoDi - Guías completas y herramientas interactivas para desarrolladores</p>
              </div>

              <h4 >Aspectos Destacados del Proyecto</h4>
              <ul>
                <li>
                  <strong >Listo para Producción:</strong> <span >API en vivo procesando pagos reales activamente</span>
                </li>
                <li>
                  <strong >Integración Gubernamental:</strong> <span >Integración oficial con el sistema CoDi de Banxico</span>
                </li>
                <li>
                  <strong >Cero Comisiones:</strong> <span >Sin comisiones por transacción, nunca</span>
                </li>
                <li>
                  <strong >Seguridad de Nivel Bancario:</strong> <span >Firmas digitales RSA y autenticación por certificados</span>
                </li>
                <li>
                  <strong >Código Abierto:</strong> <span >Licencia Apache 2.0, completamente transparente</span>
                </li>
                <li>
                  <strong >Documentación Completa:</strong> <span >Playground interactivo, generadores de código y guías detalladas</span>
                </li>
                <li>
                  <strong >Mercado Mexicano:</strong> <span >Construido específicamente para la infraestructura de pagos de México</span>
                </li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- What is CoDi -->
            <div class="blog-section" id="what-is-codi">
              <h3 >¿Qué es CoDi?</h3>
              <p >CoDi (Cobro Digital) es el sistema oficial de pagos digitales del Banco Central de México, lanzado en 2019 para promover la inclusión financiera y proporcionar una alternativa moderna a los pagos en efectivo y con tarjeta.</p>

              <h4 >Cómo Funciona CoDi</h4>
              <p >A diferencia de los procesadores de pago tradicionales, CoDi opera directamente a través del sistema bancario. Cuando un cliente realiza un pago CoDi, el dinero se transfiere instantáneamente desde su cuenta bancaria a la cuenta bancaria del comerciante, sin intermediarios que se lleven una comisión.</p>

              <p >El sistema soporta dos métodos de pago:</p>
              <ul>
                <li>
                  <strong >Pagos con Código QR:</strong> <span >El cliente escanea un código QR con su aplicación bancaria para autorizar el pago</span>
                </li>
                <li>
                  <strong >Notificaciones Push:</strong> <span >La solicitud de pago se envía directamente a la aplicación bancaria móvil del cliente</span>
                </li>
              </ul>

              <h4 >Beneficios Clave de CoDi</h4>
              <ul>
                <li>
                  <strong >Cero Comisiones por Transacción:</strong> <span >Sin comisiones cobradas a comerciantes o clientes</span>
                </li>
                <li>
                  <strong >Transferencia Inmediata de Dinero:</strong> <span >Fondos disponibles de inmediato</span>
                </li>
                <li>
                  <strong >Trazabilidad Completa:</strong> <span >Rastro de auditoría completo de todas las transacciones</span>
                </li>
                <li>
                  <strong >Seguridad de Nivel Bancario:</strong> <span >Protegido por las mismas medidas de seguridad que la banca en línea</span>
                </li>
                <li>
                  <strong >Compatibilidad Universal:</strong> <span >Funciona con todos los bancos mexicanos</span>
                </li>
              </ul>

              <div class="image-container">
                <img
                  src="../images/codi-api/codi-workflow.png"
                  alt="CoDi Payment Workflow Diagram"
                  class="image fit"
                />
                <p class="image-caption" >Proceso de Pago CoDi en 3 Pasos: Generar solicitud de pago, cliente autoriza, confirmación instantánea</p>
              </div>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Technical Architecture -->
            <div class="blog-section" id="architecture">
              <h3 >Arquitectura Técnica</h3>
              <p >La API CoDi está construida como una capa de middleware Node.js/Express que maneja la autenticación compleja y la comunicación con la infraestructura de pagos de Banxico, exponiendo una API REST simple a las aplicaciones cliente.</p>

              <div class="image-container">
                <img
                  src="../images/codi-api/simplified-architecture-diagram.png"
                  alt="Simplified CoDi API Architecture Overview"
                  class="image fit"
                />
                <p class="image-caption" >Vista general simplificada de la arquitectura mostrando los componentes principales y el flujo de datos</p>
              </div>

              <h4 >Componentes de la Arquitectura</h4>
              <p >El sistema consiste en varias capas clave:</p>

              <ol>
                <li>
                  <strong >Capa de API REST (Express.js):</strong> <span >Maneja solicitudes entrantes, validación y respuestas</span>
                </li>
                <li>
                  <strong >Capa de Autenticación:</strong> <span >Gestiona firmas digitales RSA y validación de certificados</span>
                </li>
                <li>
                  <strong >Capa de Integración con Banxico:</strong> <span >Se comunica con los endpoints CoDi de Banxico</span>
                </li>
                <li>
                  <strong >Arquitectura de Respaldo:</strong> <span >Soporte de múltiples endpoints con lógica de reintento automático</span>
                </li>
                <li>
                  <strong >Persistencia de Datos (Supabase):</strong> <span >Almacena claves API, registros de pago y logs de auditoría</span>
                </li>
                <li>
                  <strong >Sistema de Webhooks:</strong> <span >Entrega confirmaciones de pago en tiempo real a aplicaciones cliente</span>
                </li>
              </ol>

              <div class="image-container">
                <img
                  src="../images/codi-api/architecture-diagram.png"
                  alt="Detailed CoDi API Technical Architecture Diagram"
                  class="image fit"
                />
                <p class="image-caption" >Diagrama detallado de arquitectura mostrando el flujo completo de datos desde la aplicación cliente a través de la API CoDi hasta Banxico</p>
              </div>

              <h4 >Flujo de Solicitud</h4>
              <p >Esto es lo que sucede cuando una aplicación cliente solicita un pago:</p>
              <ol>
                <li >El cliente envía una solicitud POST con detalles del pago (monto, descripción, etc.)</li>
                <li >La API valida la solicitud y autentica usando la clave API</li>
                <li >Los datos del pago se firman con el certificado RSA</li>
                <li >La solicitud firmada se envía al sistema CoDi de Banxico</li>
                <li >Banxico genera el código QR o envía la notificación push</li>
                <li >La API almacena el registro de transacción en PostgreSQL</li>
                <li >La respuesta se devuelve al cliente con el código QR o confirmación</li>
                <li >Cuando el cliente paga, se envía una notificación webhook a la URL de callback del cliente</li>
              </ol>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Key Features -->
            <div class="blog-section" id="features">
              <h3 >Características Principales</h3>
              <p >La API CoDi proporciona seis características principales, cada una diseñada para hacer que la integración de pagos digitales sea lo más simple posible mientras se mantiene seguridad y confiabilidad de nivel empresarial.</p>

              <!-- QR Code Payments -->
              <h4 id="qr-payments" >1. Generación de Pagos con Código QR</h4>
              <p >Genera códigos QR compatibles con CoDi que los clientes pueden escanear con cualquier aplicación bancaria mexicana. Los códigos QR son dinámicos, lo que significa que contienen toda la información del pago y pueden expirar después de un tiempo especificado.</p>
              <ul>
                <li >Rango de pago: $1 - $12,500 MXN por transacción</li>
                <li >Expiración personalizable (incluyendo sin expiración)</li>
                <li >Incluye números de referencia y descripciones personalizadas</li>
                <li >Código QR codificado en Base64 devuelto en la respuesta de la API</li>
              </ul>

              <div class="image-container">
                <img
                  src="../images/codi-api/swagger-qr-endpoint.png"
                  alt="Swagger documentation showing QR code generation endpoint"
                  class="image fit"
                />
                <p class="image-caption" >Documentación Swagger para el endpoint /v2/codi/qr</p>
              </div>

              <!-- Push Notifications -->
              <h4 id="push-payments" >2. Notificaciones de Pago Push</h4>
              <p >Envía solicitudes de pago directamente a la aplicación bancaria móvil de un cliente usando su número de teléfono. El cliente recibe una notificación y puede autorizar el pago con un solo toque.</p>
              <ul>
                <li >Entrega instantánea a la aplicación bancaria del cliente</li>
                <li >No se requiere escaneo de código QR</li>
                <li >Perfecto para pagos remotos</li>
                <li >Actualizaciones de estado de pago en tiempo real</li>
              </ul>

              <div class="image-container">
                <img
                  src="../images/codi-api/swagger-push-endpoint.png"
                  alt="Swagger documentation showing push notification endpoint"
                  class="image fit"
                />
                <p class="image-caption" >Documentación Swagger para el endpoint /v2/codi/push</p>
              </div>

              <!-- Payment Status Queries -->
              <h4 id="payment-queries" >3. Consultas de Estado de Pago</h4>
              <p >Verifica el estado de cualquier pago usando su número de referencia único folioCoDi. Esto permite verificación de pago en tiempo real y seguimiento del historial de transacciones.</p>
              <ul>
                <li >Verificación de pago en tiempo real</li>
                <li >Búsqueda de historial de transacciones</li>
                <li >Capacidades de rastro de auditoría</li>
                <li >Información detallada del pago</li>
              </ul>

              <!-- Webhooks -->
              <h4 id="webhooks" >4. Integración de Webhooks</h4>
              <p >Recibe notificaciones automáticas cuando se completan los pagos. Configura una URL de callback, y la API enviará datos de confirmación de pago a tu servidor cuando un cliente pague.</p>
              <ul>
                <li >Confirmaciones automáticas de pago</li>
                <li >URLs de callback configurables</li>
                <li >Firma segura de webhooks</li>
                <li >Lógica de reintento para entregas fallidas</li>
              </ul>

              <!-- Security -->
              <h4 id="security" >5. Arquitectura de Seguridad</h4>
              <p >Las características de seguridad de nivel empresarial protegen tanto la API como tus datos de pago. Cada solicitud a Banxico está firmada digitalmente con certificados RSA, y todas las comunicaciones están encriptadas.</p>
              <ul>
                <li >Firmas digitales RSA (mínimo 2048 bits)</li>
                <li >Autenticación basada en certificados con Banxico</li>
                <li >Gestión de claves API a través de Supabase</li>
                <li >Registro de solicitudes/respuestas para rastros de auditoría</li>
                <li >Protección CORS con lista blanca de IPs</li>
                <li >Limitación de tasa (200 solicitudes por 15 minutos)</li>
                <li >Encabezados de seguridad Helmet.js</li>
              </ul>

              <!-- Documentation -->
              <h4 id="documentation" >6. Documentación Interactiva</h4>
              <p >La documentación completa con herramientas interactivas hace que la integración sea sencilla, incluso para desarrolladores nuevos en el procesamiento de pagos.</p>
              <ul>
                <li >Especificación Swagger/OpenAPI 3.0</li>
                <li >Funcionalidad de prueba para todos los endpoints</li>
                <li >Guías de integración paso a paso en español</li>
                <li >Generadores de código para múltiples lenguajes</li>
                <li >Playground interactivo de API</li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Developer Experience -->
            <div class="blog-section" id="developer-experience">
              <h3 >Experiencia del Desarrollador</h3>
              <p >Una gran API necesita gran documentación y herramientas. La API CoDi incluye un sitio de documentación completo con características interactivas que hacen que la integración sea más rápida y la depuración más fácil.</p>

              <h4 >Playground Interactivo de API</h4>
              <p >Prueba todos los endpoints de la API directamente desde tu navegador sin escribir ningún código. El playground incluye ejemplos prellenados y valida tus solicitudes en tiempo real.</p>

              <div class="image-container">
                <img
                  src="../images/codi-api/docs-playground.png"
                  alt="Interactive API Playground Interface"
                  class="image fit"
                />
                <p class="image-caption" >Playground de API en vivo para probar generación de QR, notificaciones push y consultas de pago</p>
              </div>

              <h4 >Generadores de Código</h4>
              <p >Genera código de integración listo para usar en múltiples lenguajes de programación. Simplemente selecciona tu endpoint e idioma, y obtén ejemplos de código listos para producción.</p>

              <div class="image-container">
                <img
                  src="../images/codi-api/docs-tools.png"
                  alt="Code Generator Tool showing cURL, JavaScript, and Python examples"
                  class="image fit"
                />
                <p class="image-caption" >Generador de código que soporta cURL, JavaScript (Fetch) y Python (requests)</p>
              </div>

              <h4 >Herramientas Adicionales para Desarrolladores</h4>
              <ul>
                <li>
                  <strong >Monitor de Estado del Servicio:</strong> <span >Panel de disponibilidad de API en tiempo real</span>
                </li>
                <li>
                  <strong >Búsqueda de Códigos de Institución:</strong> <span >Base de datos de referencia de instituciones financieras</span>
                </li>
                <li>
                  <strong >Guías de Integración:</strong> <span >Tutoriales paso a paso en español</span>
                </li>
                <li>
                  <strong >Referencia de Códigos de Error:</strong> <span >Explicaciones detalladas de todas las respuestas de error</span>
                </li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Tech Stack Deep Dive -->
            <div class="blog-section" id="tech-stack">
              <h3 >Análisis Profundo del Stack Tecnológico</h3>
              <p >La API CoDi está construida con tecnologías modernas y probadas elegidas por su confiabilidad, rendimiento y capacidades de seguridad.</p>

              <h4 >Tecnologías Backend</h4>
              <pre class="code-block">
                <div class="code-header">
                  <span >Stack Backend</span>
                  <button class="copy-button" onclick="copyCode(this)">Copy</button>
                </div>
                <code class="language-javascript">// Core Technologies
Runtime:    Node.js 18.x+
Framework:  Express.js
Language:   JavaScript (ES6+)
Database:   Supabase (PostgreSQL)
Testing:    Jest with coverage reporting
Process:    PM2 for production
Docs:       Swagger/OpenAPI 3.0</code></pre>

              <h4 >Stack de Seguridad</h4>
              <pre class="code-block">
                <div class="code-header">
                  <span >Tecnologías de Seguridad</span>
                  <button class="copy-button" onclick="copyCode(this)">Copy</button>
                </div>
                <code class="language-javascript">// Security Components
Authentication:     RSA certificates (2048-bit minimum)
API Keys:           128-character hexadecimal
Middleware:         Helmet.js, CORS, Rate Limiting
Validation:         Custom sanitization layer
Digital Signatures: All Banxico requests signed</code></pre>

              <h4 >Integraciones Clave</h4>
              <ul>
                <li>
                  <strong >API de Banxico:</strong> <span >Endpoints oficiales del sistema de pagos CoDi</span>
                </li>
                <li>
                  <strong >Supabase:</strong> <span >Base de datos, almacenamiento de claves API, registro de solicitudes/respuestas</span>
                </li>
                <li>
                  <strong >Generación de Códigos QR:</strong> <span >Códigos QR de pago dinámicos</span>
                </li>
                <li>
                  <strong >Webhooks:</strong> <span >Notificaciones de pago asíncronas</span>
                </li>
              </ul>

              <h4 >Desarrollo y DevOps</h4>
              <ul>
                <li><strong >Control de Versiones:</strong> <span >Git/GitHub</span></li>
                <li>
                  <strong >CI/CD:</strong> <span >Flujo de despliegue con GitHub Actions</span>
                </li>
                <li>
                  <strong >Gestión de Entorno:</strong> <span >dotenv para configuración</span>
                </li>
                <li>
                  <strong >Cumplimiento de Licencias:</strong> <span >Verificación y reporte automatizado de licencias</span>
                </li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Database Architecture -->
            <div class="blog-section" id="database">
              <h3 >Arquitectura de Base de Datos</h3>
              <p >La API usa Supabase (PostgreSQL) para persistencia de datos, con un esquema que soporta múltiples clientes, registro de auditoría completo y seguimiento de pagos.</p>

              <h4 >Esquema de Base de Datos</h4>
              <p >La base de datos consiste en 5 tablas principales que trabajan juntas para gestionar clientes, claves API, transacciones de pago y registro completo de auditoría:</p>

              <div class="image-container">
                <img
                  src="../images/codi-api/codi-database-schema.png"
                  alt="CoDi API Database Schema showing tables and relationships"
                  class="image fit"
                />
                <p class="image-caption" >Diagrama de esquema de base de datos mostrando las 5 tablas principales y sus relaciones</p>
              </div>

              <h4 >Características de Integridad de Datos</h4>
              <ul>
                <li >Las restricciones de clave foránea aseguran la integridad referencial</li>
                <li >Las columnas de marca de tiempo rastrean creación y actualizaciones</li>
                <li >La segregación de entornos previene la mezcla de datos de prueba/producción</li>
                <li >Consultas indexadas para búsquedas rápidas de pagos</li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Security Features Deep Dive -->
            <div class="blog-section" id="security-deep-dive">
              <h3 >Análisis Profundo de Características de Seguridad</h3>
              <p >La seguridad es primordial al manejar transacciones financieras. La API CoDi implementa múltiples capas de seguridad para proteger datos sensibles de pago y asegurar el cumplimiento con regulaciones bancarias.</p>

              <h4 >Autenticación de Firma Digital</h4>
              <p >Cada solicitud a Banxico está firmada digitalmente usando certificados RSA. Esto asegura que Banxico pueda verificar que la solicitud se originó de una instancia autorizada de la API CoDi y no ha sido alterada.</p>

              <pre class="code-block">
                <div class="code-header">
                  <span >JavaScript - Generación de Firma Digital</span>
                  <button class="copy-button" onclick="copyCode(this)">Copy</button>
                </div>
                <code class="language-javascript">// Example of RSA signature generation
const crypto = require('crypto');
const fs = require('fs');

function generateDigitalSignature(payload, privateKeyPath) {
  // Load RSA private key
  const privateKey = fs.readFileSync(privateKeyPath, 'utf8');

  // Create signature using SHA256 with RSA
  const sign = crypto.createSign('SHA256');
  sign.update(JSON.stringify(payload));
  sign.end();

  // Generate signature in base64 format
  const signature = sign.sign(privateKey, 'base64');

  return signature;
}</code></pre>

              <h4 >Validación de Certificados</h4>
              <p >La API valida certificados RSA comparando números de serie y verificando la autenticidad del certificado antes de aceptar cualquier solicitud. Esto previene el acceso no autorizado incluso si alguien obtiene una clave API válida.</p>

              <h4 >Lista Blanca de IPs y Control de Acceso</h4>
              <p >El sistema implementa lista blanca estricta de IPs a través de tres capas de seguridad para asegurar que solo clientes autorizados puedan acceder a la infraestructura de pagos:</p>
              <ul>
                <li>
                  <strong >Capa de Firewall:</strong> <span >El filtrado de IP a nivel de red bloquea tráfico no autorizado antes de que llegue a la aplicación</span>
                </li>
                <li>
                  <strong >Capa de API:</strong> <span >La validación de IP a nivel de aplicación asegura que solo IPs de clientes registrados puedan hacer solicitudes a la API</span>
                </li>
                <li>
                  <strong >Capa Bancaria:</strong> <span >Banxico requiere direcciones IP pre-registradas para todas las conexiones al sistema CoDi, proporcionando un punto de control de seguridad adicional</span>
                </li>
              </ul>
              <p >Esta arquitectura de restricción de IP multicapa asegura que incluso con credenciales válidas, el acceso solo sea posible desde ubicaciones de red aprobadas, reduciendo significativamente la superficie de ataque.</p>

              <h4 >Gestión de Claves API</h4>
              <p >Las claves API son cadenas hexadecimales de 128 caracteres almacenadas de forma segura en Supabase. Cada clave está vinculada a un cliente específico y entorno (Beta o Producción), con límites de tasa y permisos individuales.</p>

              <h4 >Sanitización de Solicitudes</h4>
              <p >Todas las solicitudes entrantes son sanitizadas para prevenir inyección SQL, ataques XSS y otras vulnerabilidades comunes. La validación de entrada asegura que solo datos con formato apropiado lleguen a la capa de integración con Banxico.</p>

              <h4 >Limitación de Tasa</h4>
              <p >La API implementa limitación de tasa para prevenir abuso y asegurar asignación justa de recursos. El límite predeterminado es 200 solicitudes por ventana de 15 minutos por clave API.</p>

              <h4 >Encabezados de Seguridad</h4>
              <p >Helmet.js agrega encabezados de seguridad a todas las respuestas, protegiendo contra vulnerabilidades web comunes como clickjacking, XSS y detección de tipo de contenido.</p>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- API Endpoints Reference -->
            <div class="blog-section" id="api-endpoints">
              <h3 >Referencia de Endpoints de API</h3>
              <p>La API CoDi expone 5 endpoints principales para gestionar pagos digitales. Todos los endpoints requieren autenticación de clave API a través del encabezado <code>x-api-key</code>.
              </p>

              <h4 >Vista General de Endpoints</h4>
              <table>
                <thead>
                  <tr>
                    <th >Endpoint</th>
                    <th >Método</th>
                    <th >Propósito</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>/v2/health</code></td>
                    <td>GET</td>
                    <td >Verificación de salud y estado del sistema</td>
                  </tr>
                  <tr>
                    <td><code>/v2/codi/qr</code></td>
                    <td>POST</td>
                    <td >Generar solicitud de pago con código QR</td>
                  </tr>
                  <tr>
                    <td><code>/v2/codi/push</code></td>
                    <td>POST</td>
                    <td >Enviar solicitud de pago por notificación push</td>
                  </tr>
                  <tr>
                    <td><code>/v2/codi/consulta</code></td>
                    <td>POST</td>
                    <td >Consultar estado de pago por folioCoDi</td>
                  </tr>
                  <tr>
                    <td><code>/v2/resultadoOperaciones</code></td>
                    <td>POST</td>
                    <td >Endpoint de webhook para callbacks de pago</td>
                  </tr>
                </tbody>
              </table>

              <div class="image-container">
                <img
                  src="../images/codi-api/swagger-all-endpoints.png"
                  alt="Complete Swagger API Documentation showing all endpoints"
                  class="image fit"
                />
                <p class="image-caption" >Documentación Swagger completa mostrando todos los endpoints de API organizados por categoría</p>
              </div>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Use Cases -->
            <div class="blog-section" id="use-cases">
              <h3 >Casos de Uso</h3>
              <p >La API CoDi es versátil y puede integrarse en una amplia variedad de aplicaciones empresariales. Aquí están los casos de uso más comunes:</p>

              <h4 >1. Plataformas de Comercio Electrónico</h4>
              <p >Las tiendas en línea pueden integrar CoDi como opción de pago al momento del checkout, ofreciendo a los clientes una alternativa sin comisiones a las tarjetas de crédito.</p>
              <ul>
                <li >Integración con carrito de compras</li>
                <li >Flujos de confirmación de pedidos</li>
                <li >Actualizaciones automáticas de inventario al recibir el pago</li>
                <li >Recibos y facturas por correo electrónico</li>
              </ul>

              <h4 >2. Sistemas de Punto de Venta</h4>
              <p >Las ubicaciones de comercio físico pueden usar CoDi para pagos en persona, mostrando códigos QR en el mostrador o enviando notificaciones push.</p>
              <ul>
                <li >Mostradores de pago en comercio minorista</li>
                <li >Escritorios de servicio y quioscos</li>
                <li >Terminales POS móviles</li>
                <li >Sistemas de pago para restaurantes</li>
              </ul>

              <h4 >3. Proveedores de Servicios</h4>
              <p >Las empresas basadas en servicios pueden solicitar pagos de forma remota a través de notificaciones push, perfecto para facturación recurrente o servicios bajo demanda.</p>
              <ul>
                <li >Pagos de servicios públicos y facturas</li>
                <li >Servicios de suscripción</li>
                <li >Servicios profesionales (consultores, freelancers)</li>
                <li >Servicios de mantenimiento y reparación</li>
              </ul>

              <h4 >4. Mercados</h4>
              <p >Las plataformas multi-vendedor pueden usar CoDi para manejar transacciones peer-to-peer entre compradores y vendedores.</p>
              <ul>
                <li >Plataformas de transacciones peer-to-peer</li>
                <li >Anuncios clasificados y listados</li>
                <li >Mercados freelance</li>
                <li >Plataformas basadas en comisiones</li>
              </ul>

              <p>
                <strong><span >¿Te gustaría implementar CoDi para tu negocio?</span></strong> <a href="mailto:pablo.cruz.lemini@gmail.com" class="blog-link" >Contáctame</a> <span >y te ayudaré a integrarlo.</span>
              </p>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Open Source & Community -->
            <div class="blog-section" id="open-source">
              <h3 >Código Abierto y Comunidad</h3>
              <p >La API CoDi es de código abierto bajo la licencia Apache 2.0, lo que significa que puedes usarla comercialmente, modificarla, distribuirla e incluso patentarla, con restricciones mínimas.</p>

              <h4 >Beneficios de la Licencia Apache 2.0</h4>
              <ul>
                <li>
                  <strong >Uso Comercial:</strong> <span >Usa la API en productos comerciales sin tarifas</span>
                </li>
                <li>
                  <strong >Modificación:</strong> <span >Personaliza el código para ajustarse a tus necesidades específicas</span>
                </li>
                <li>
                  <strong >Distribución:</strong> <span >Distribuye versiones modificadas o sin modificar</span>
                </li>
                <li>
                  <strong >Concesión de Patente:</strong> <span >Protección contra demandas de patentes</span>
                </li>
                <li>
                  <strong >Sin Garantía:</strong> <span >Proporcionado "tal cual" sin responsabilidad</span>
                </li>
              </ul>

              <h4 >Contribuir al Proyecto</h4>
              <p >¡Las contribuciones son bienvenidas! Ya sea que estés arreglando errores, agregando funciones, mejorando la documentación o reportando problemas, tu ayuda hace que el proyecto sea mejor para todos.</p>

              <h4 >Cómo Contribuir</h4>
              <ol>
                <li >Haz fork del repositorio en GitHub</li>
                <li>Crea una rama de funcionalidad (<code>git checkout -b feature/nueva-funcionalidad</code>)</code
                  >)
                </li>
                <li>Haz commit de tus cambios (<code>git commit -m 'Agregar nueva funcionalidad'</code>)</code
                  >)
                </li>
                <li>Haz push a la rama (<code>git push origin feature/nueva-funcionalidad</code>)</code
                  >)
                </li>
                <li >Abre un Pull Request</li>
              </ol>

              <h4 >Recursos de la Comunidad</h4>
              <ul>
                <li>
                  <strong >GitHub Issues:</strong> <span >Reporta errores y solicita funciones</span>
                </li>
                <li>
                  <strong >GitHub Discussions:</strong> <span >Haz preguntas y comparte ideas</span>
                </li>
                <li>
                  <strong >Documentación:</strong> <span >Guías completas y referencia de API</span>
                </li>
                <li>
                  <strong >Ejemplos de Código:</strong> <span >Ejemplos de integración del mundo real</span>
                </li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>

            <div class="section-separator"></div>

            <!-- Project Links & Resources -->
            <div class="blog-section" id="links">
              <h3 >Enlaces del Proyecto y Recursos</h3>

              <h4 >Servicios en Vivo</h4>
              <ul>
                <li>
                  <a
          href="https://api.bite-size.mx/"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Endpoint de API</a
                  >
                  <span >- URL base de la API de producción</span>
                </li>
                <li>
                  <a
          href="https://docs.bite-size.mx/"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Sitio de Documentación</a
                  >
                  <span >- Guías completas y tutoriales</span>
                </li>
                <li>
                  <a
          href="https://docs.bite-size.mx/playground"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Playground de API</a
                  >
                  <span >- Entorno de pruebas interactivo</span>
                </li>
                <li>
                  <a
          href="https://api.bite-size.mx/api-docs"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Documentación Swagger</a
                  >
                  <span >- Referencia completa de la API</span>
                </li>
              </ul>

              <h4 >Código y Comunidad</h4>
              <ul>
                <li>
                  <a
          href="https://github.com/portfedh/codi-api"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Repositorio de GitHub</a
                  >
                  <span >- Código fuente y README</span>
                </li>
                <li>
                  <a
          href="https://github.com/portfedh/codi-api/issues"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Issues</a
                  >
                  <span >- Reportes de errores y solicitudes de funciones</span>
                </li>
                <li>
                  <a
          href="https://github.com/portfedh/codi-api/discussions"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >Discusiones</a
                  >
                  <span >- Preguntas de la comunidad e ideas</span>
                </li>
              </ul>

              <h4 >Recursos Externos</h4>
              <ul>
                <li>
                  <a
          href="https://www.banxico.org.mx/codi/"
          target="_blank"
          rel="noopener noreferrer"
          class="blog-link"
          
          >CoDi Oficial de Banxico</a
                  >
                  <span >- Información de CoDi del Banco de México</span>
                </li>
              </ul>

              <div style="text-align: center">
                <a
                  href="#blog-content"
                  class="back-to-top"
                 
                  title="Back to Top"
                ><span >Volver Arriba</span></a>
              </div>
            </div>
          </article>
        </div>
      </section>
      <!-- Blog Content End -->

      <!-- Navigation Section -->
      <section id="navigation" class="main style1">
        <div class="container">
          <article>
            <div class="blog-navigation">
              <div class="nav-links">
                <div class="nav-left">
                  <a href="../es/index.html" class="button white-text"
                    >← <span >Volver al Portafolio</span></a
                  >
                </div>
                <div class="nav-right">
                  <a
                    href="https://github.com/portfedh/codi-api"
                    class="button white-text"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <i class="fab fa-github"></i> <span >Ver en GitHub</span>
                  </a>
                  <a
                    href="https://docs.bite-size.mx/"
                    class="button white-text"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <i class="fas fa-book"></i> <span >Documentación</span>
                  </a>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Contact Start-->
      <section id="contact-section" class="main style2 special">
        <div class="container">
          <article>
            <header class="major fade-out">
              <h2>Get in touch!</h2>
            </header>
            <p class="fade-out">
              I'm currently open to work and I'd be happy to chat.
              <br />
              <br />
              Feel free to reach out if you are interested in what I can bring
              to your project or team.
            </p>
            <ul class="actions special">
              <li>
                <a
                  href="mailto:pablo.cruz.lemini@gmail.com"
                  class="button wide primary fade-out"
                  >Email me</a
                >
              </li>
            </ul>
          </article>
        </div>
      </section>
      <!-- Contact End-->
    </main>
    <!-- Main Content End -->

    <!-- Footer Start -->
    <footer id="footer">
      <ul class="icons">
        <li>
          <a
            href="https://twitter.com/Portfedh"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Twitter Profile"
            ><i class="fa-brands fa-twitter"></i
            ><span class="label">Twitter</span></a
          >
        </li>
        <li>
          <a
            href="https://www.linkedin.com/in/pablo-cruz-cdmx/"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="LinkedIn Profile"
            ><i class="fa-brands fa-linkedin"></i
            ><span class="label">LinkedIn</span></a
          >
        </li>
        <li>
          <a
            href="https://github.com/portfedh"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="GitHub Profile"
            ><i class="fa-brands fa-github"></i
            ><span class="label">GitHub</span></a
          >
        </li>
        <li>
          <a href="mailto:pablo.cruz.lemini@gmail.com" aria-label="Email link"
            ><i class="fa-solid fa-envelope"></i
            ><span class="label">Email</span></a
          >
        </li>
      </ul>
      <ul class="copyright">
        <li>
          &copy;
          <script>
            document.write(new Date().getFullYear());
          </script>
          Pablo Cruz.
        </li>
      </ul>
    </footer>
    <!-- Footer End -->

    <!-- Scripts -->
    <script src="../assets/js/blog-i18n.js"></script>
    <script>
      // Initialize blog translation system
      const blogI18n = new BlogI18n('codi-api');
      blogI18n.init();
    </script>
    <script src="../assets/js/main.js"></script>
    <script
      src="https://kit.fontawesome.com/1450436a40.js"
      crossorigin="anonymous"
    ></script>

    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Blog functionality -->
    <script src="../assets/js/blog.js"></script>
  </body>
</html>
